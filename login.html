<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Login - MyWebsite</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

<style>
body{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
}

.card{
  border:none;
  border-radius:20px;
  box-shadow:0 20px 40px hsla(0, 0%, 0%, 0.3);
}

.form-control{
  border-radius:10px;
}

.btn{
  border-radius:10px;
}

a{
  text-decoration:none;
}

.alert {
  border-radius: 10px;
  font-size: 0.9rem;
}
</style>
</head>

<body>

<div class="card p-4 text-center" style="width:400px">
  <h2 class="mb-3 fw-bold">Login</h2>
  <p class="text-muted mb-4">Welcome to my Website. Please log in to continue!</p>

  <div id="alertBox"></div>

  <form id="loginForm" onsubmit="handleLogin(event)">
    <input class="form-control mb-3" type="text" id="username" placeholder="Username" required>
    <input class="form-control mb-3" type="password" id="password" placeholder="Password" required>

    <button type="submit" class="btn btn-success w-100 mb-3">Login</button>
  </form>

  <small class="text-muted">
    Don't have an account? 
    <a href="Registration_Form.html" class="text-success fw-semibold">Register</a>
  </small>
</div>

<script>
// Check if user is already logged in
window.onload = function() {
  const isLoggedIn = localStorage.getItem('isLoggedIn');
  if (isLoggedIn === 'true') {
    window.location.href = 'LandingPage.html';
  }

  // Check for registration success message
  const justRegistered = sessionStorage.getItem('justRegistered');
  if (justRegistered === 'true') {
    showAlert('Registration successful! Please log in with your credentials.', 'success');
    sessionStorage.removeItem('justRegistered');
  }
};

function handleLogin(event) {
  event.preventDefault();
  
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;

  // Get registered users from localStorage
  const users = JSON.parse(localStorage.getItem('registeredUsers') || '[]');

  // Check if user exists
  const user = users.find(u => u.username === username && u.password === password);

  if (user) {
    // Login successful
    localStorage.setItem('isLoggedIn', 'true');
    localStorage.setItem('currentUser', JSON.stringify(user));
    showAlert('Login successful! Redirecting...', 'success');
    
    setTimeout(() => {
      window.location.href = 'LandingPage.html';
    }, 1000);
  } else {
    // Login failed
    showAlert('Invalid username or password. Please try again or register.', 'danger');
  }
}

function showAlert(message, type) {
  const alertBox = document.getElementById('alertBox');
  alertBox.innerHTML = `
    <div class="alert alert-${type} alert-dismissible fade show" role="alert">
      ${message}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  `;
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>